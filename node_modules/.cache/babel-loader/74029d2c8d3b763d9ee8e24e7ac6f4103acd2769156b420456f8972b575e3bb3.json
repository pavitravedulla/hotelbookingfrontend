{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import ApiService from'../../service/ApiService';import AdminLayout from'./AdminLayout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditRoomPage=()=>{const{roomId}=useParams();const navigate=useNavigate();const[roomDetails,setRoomDetails]=useState({roomPhotoUrl:'',roomType:'',roomPrice:'',roomDescription:''});const[file,setFile]=useState(null);const[preview,setPreview]=useState(null);const[error,setError]=useState('');const[success,setSuccess]=useState('');useEffect(()=>{const fetchRoomDetails=async()=>{try{const response=await ApiService.getRoomById(roomId);setRoomDetails({roomPhotoUrl:response.room.roomPhotoUrl,roomType:response.room.roomType,roomPrice:response.room.roomPrice,roomDescription:response.room.roomDescription});}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);}};fetchRoomDetails();},[roomId]);const handleChange=e=>{const{name,value}=e.target;setRoomDetails(prevState=>({...prevState,[name]:value}));};const handleFileChange=e=>{const selectedFile=e.target.files[0];if(selectedFile){setFile(selectedFile);setPreview(URL.createObjectURL(selectedFile));}else{setFile(null);setPreview(null);}};const handleUpdate=async()=>{try{const formData=new FormData();formData.append('roomType',roomDetails.roomType);formData.append('roomPrice',roomDetails.roomPrice);formData.append('roomDescription',roomDetails.roomDescription);if(file){formData.append('photo',file);}const result=await ApiService.updateRoom(roomId,formData);if(result.statusCode===200){setSuccess('Room updated successfully.');setTimeout(()=>{setSuccess('');navigate('/admin/manage-rooms');},3000);}setTimeout(()=>setSuccess(''),5000);}catch(error){var _error$response2,_error$response2$data;setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message);setTimeout(()=>setError(''),5000);}};const handleDelete=async()=>{if(window.confirm('Do you want to delete this room?')){try{const result=await ApiService.deleteRoom(roomId);if(result.statusCode===200){setSuccess('Room Deleted successfully.');setTimeout(()=>{setSuccess('');navigate('/admin/manage-rooms');},3000);}}catch(error){var _error$response3,_error$response3$data;setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||error.message);setTimeout(()=>setError(''),5000);}}};return/*#__PURE__*/_jsx(AdminLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"edit-room-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Room\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"success-message\",children:success}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-room-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[preview?/*#__PURE__*/_jsx(\"img\",{src:preview,alt:\"Room Preview\",className:\"room-photo-preview\"}):roomDetails.roomPhotoUrl&&/*#__PURE__*/_jsx(\"img\",{src:roomDetails.roomPhotoUrl,alt:\"Room\",className:\"room-photo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"roomPhoto\",onChange:handleFileChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Room Type\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"roomType\",value:roomDetails.roomType,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Room Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"roomPrice\",value:roomDetails.roomPrice,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Room Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"roomDescription\",value:roomDetails.roomDescription,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",onClick:handleUpdate,children:\"Update Room\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:handleDelete,children:\"Delete Room\"})]})]})});};export default EditRoomPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ApiService","AdminLayout","jsx","_jsx","jsxs","_jsxs","EditRoomPage","roomId","navigate","roomDetails","setRoomDetails","roomPhotoUrl","roomType","roomPrice","roomDescription","file","setFile","preview","setPreview","error","setError","success","setSuccess","fetchRoomDetails","response","getRoomById","room","_error$response","_error$response$data","data","message","handleChange","e","name","value","target","prevState","handleFileChange","selectedFile","files","URL","createObjectURL","handleUpdate","formData","FormData","append","result","updateRoom","statusCode","setTimeout","_error$response2","_error$response2$data","handleDelete","window","confirm","deleteRoom","_error$response3","_error$response3$data","children","className","src","alt","type","onChange","onClick"],"sources":["C:/Users/ADMIN/Desktop/CICD/frontend-hotelbooking1/frontend-hotelbooking/src/component/admin/EditRoomPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ApiService from '../../service/ApiService';\nimport AdminLayout from './AdminLayout';\n\nconst EditRoomPage = () => {\n    const { roomId } = useParams();\n    const navigate = useNavigate();\n    const [roomDetails, setRoomDetails] = useState({\n        roomPhotoUrl: '',\n        roomType: '',\n        roomPrice: '',\n        roomDescription: '',\n    });\n    const [file, setFile] = useState(null);\n    const [preview, setPreview] = useState(null);\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n\n    useEffect(() => {\n        const fetchRoomDetails = async () => {\n            try {\n                const response = await ApiService.getRoomById(roomId);\n                setRoomDetails({\n                    roomPhotoUrl: response.room.roomPhotoUrl,\n                    roomType: response.room.roomType,\n                    roomPrice: response.room.roomPrice,\n                    roomDescription: response.room.roomDescription,\n                });\n            } catch (error) {\n                setError(error.response?.data?.message || error.message);\n            }\n        };\n        fetchRoomDetails();\n    }, [roomId]);\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setRoomDetails(prevState => ({\n            ...prevState,\n            [name]: value,\n        }));\n    };\n\n    const handleFileChange = (e) => {\n        const selectedFile = e.target.files[0];\n        if (selectedFile) {\n            setFile(selectedFile);\n            setPreview(URL.createObjectURL(selectedFile));\n        } else {\n            setFile(null);\n            setPreview(null);\n        }\n    };\n\n\n    const handleUpdate = async () => {\n        try {\n            const formData = new FormData();\n            formData.append('roomType', roomDetails.roomType);\n            formData.append('roomPrice', roomDetails.roomPrice);\n            formData.append('roomDescription', roomDetails.roomDescription);\n\n            if (file) {\n                formData.append('photo', file);\n            }\n\n            const result = await ApiService.updateRoom(roomId, formData);\n            if (result.statusCode === 200) {\n                setSuccess('Room updated successfully.');\n                \n                setTimeout(() => {\n                    setSuccess('');\n                    navigate('/admin/manage-rooms');\n                }, 3000);\n            }\n            setTimeout(() => setSuccess(''), 5000);\n        } catch (error) {\n            setError(error.response?.data?.message || error.message);\n            setTimeout(() => setError(''), 5000);\n        }\n    };\n\n    const handleDelete = async () => {\n        if (window.confirm('Do you want to delete this room?')) {\n            try {\n                const result = await ApiService.deleteRoom(roomId);\n                if (result.statusCode === 200) {\n                    setSuccess('Room Deleted successfully.');\n                    \n                    setTimeout(() => {\n                        setSuccess('');\n                        navigate('/admin/manage-rooms');\n                    }, 3000);\n                }\n            } catch (error) {\n                setError(error.response?.data?.message || error.message);\n                setTimeout(() => setError(''), 5000);\n            }\n        }\n    };\n\n    return (\n        <AdminLayout>\n            <div className=\"edit-room-container\">\n                <h2>Edit Room</h2>\n                {error && <p className=\"error-message\">{error}</p>}\n                {success && <p className=\"success-message\">{success}</p>}\n                <div className=\"edit-room-form\">\n                    <div className=\"form-group\">\n                        {preview ? (\n                            <img src={preview} alt=\"Room Preview\" className=\"room-photo-preview\" />\n                        ) : (\n                            roomDetails.roomPhotoUrl && (\n                                <img src={roomDetails.roomPhotoUrl} alt=\"Room\" className=\"room-photo\" />\n                            )\n                        )}\n                        <input\n                            type=\"file\"\n                            name=\"roomPhoto\"\n                            onChange={handleFileChange}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Room Type</label>\n                        <input\n                            type=\"text\"\n                            name=\"roomType\"\n                            value={roomDetails.roomType}\n                            onChange={handleChange}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Room Price</label>\n                        <input\n                            type=\"text\"\n                            name=\"roomPrice\"\n                            value={roomDetails.roomPrice}\n                            onChange={handleChange}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Room Description</label>\n                        <textarea\n                            name=\"roomDescription\"\n                            value={roomDetails.roomDescription}\n                            onChange={handleChange}\n                        ></textarea>\n                    </div>\n                    <button className=\"update-button\" onClick={handleUpdate}>Update Room</button>\n                    <button className=\"delete-button\" onClick={handleDelete}>Delete Room</button>\n                </div>\n            </div>\n        </AdminLayout>\n    );\n};\n\nexport default EditRoomPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}