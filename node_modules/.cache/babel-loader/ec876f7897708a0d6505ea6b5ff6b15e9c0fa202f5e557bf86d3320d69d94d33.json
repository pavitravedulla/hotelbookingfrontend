{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import ApiService from'../../service/ApiService';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const ProfilePage=()=>{const[user,setUser]=useState(null);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchUserProfile=async()=>{try{const response=await ApiService.getUserProfile();// Fetch user bookings using the fetched user ID\nconst userPlusBookings=await ApiService.getUserBookings(response.user.id);setUser(userPlusBookings.user);}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);}};fetchUserProfile();},[]);const handleLogout=()=>{ApiService.logout();navigate('/home');};const handleEditProfile=()=>{navigate('/edit-profile');};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[user&&/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",user.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit-profile-button\",onClick:handleEditProfile,children:\"Edit Profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-button\",onClick:handleLogout,children:\"Logout\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),user&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"My Profile Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone Number:\"}),\" \",user.phoneNumber]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bookings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"My Booking History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"booking-list\",children:user&&user.bookings.length>0?user.bookings.map(booking=>/*#__PURE__*/_jsxs(\"div\",{className:\"booking-item\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Booking Code:\"}),\" \",booking.bookingConfirmationCode]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Check-in Date:\"}),\" \",booking.checkInDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Check-out Date:\"}),\" \",booking.checkOutDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Guests:\"}),\" \",booking.totalNumOfGuest]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Room Type:\"}),\" \",booking.room.roomType]}),/*#__PURE__*/_jsx(\"img\",{src:booking.room.roomPhotoUrl,alt:\"Room\",className:\"room-photo\"})]},booking.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No bookings found.\"})})]})]});};export default ProfilePage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ApiService","jsxs","_jsxs","jsx","_jsx","ProfilePage","user","setUser","error","setError","navigate","fetchUserProfile","response","getUserProfile","userPlusBookings","getUserBookings","id","_error$response","_error$response$data","data","message","handleLogout","logout","handleEditProfile","className","children","name","onClick","email","phoneNumber","bookings","length","map","booking","bookingConfirmationCode","checkInDate","checkOutDate","totalNumOfGuest","room","roomType","src","roomPhotoUrl","alt"],"sources":["C:/Users/ADMIN/Desktop/CICD/frontend-hotelbooking1/frontend-hotelbooking/src/component/profile/ProfilePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport ApiService from '../../service/ApiService';\n\nconst ProfilePage = () => {\n    const [user, setUser] = useState(null);\n    const [error, setError] = useState(null);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchUserProfile = async () => {\n            try {\n                const response = await ApiService.getUserProfile();\n                // Fetch user bookings using the fetched user ID\n                const userPlusBookings = await ApiService.getUserBookings(response.user.id);\n                setUser(userPlusBookings.user)\n\n            } catch (error) {\n                setError(error.response?.data?.message || error.message);\n            }\n        };\n\n        fetchUserProfile();\n    }, []);\n\n    const handleLogout = () => {\n        ApiService.logout();\n        navigate('/home');\n    };\n\n    const handleEditProfile = () => {\n        navigate('/edit-profile');\n    };\n\n    return (\n        <div className=\"profile-page\">\n            {user && <h2>Welcome, {user.name}</h2>}\n            <div className=\"profile-actions\">\n                <button className=\"edit-profile-button\" onClick={handleEditProfile}>Edit Profile</button>\n                <button className=\"logout-button\" onClick={handleLogout}>Logout</button>\n            </div>\n            {error && <p className=\"error-message\">{error}</p>}\n            {user && (\n                <div className=\"profile-details\">\n                    <h3>My Profile Details</h3>\n                    <p><strong>Email:</strong> {user.email}</p>\n                    <p><strong>Phone Number:</strong> {user.phoneNumber}</p>\n                </div>\n            )}\n            <div className=\"bookings-section\">\n                <h3>My Booking History</h3>\n                <div className=\"booking-list\">\n                    {user && user.bookings.length > 0 ? (\n                        user.bookings.map((booking) => (\n                            <div key={booking.id} className=\"booking-item\">\n                                <p><strong>Booking Code:</strong> {booking.bookingConfirmationCode}</p>\n                                <p><strong>Check-in Date:</strong> {booking.checkInDate}</p>\n                                <p><strong>Check-out Date:</strong> {booking.checkOutDate}</p>\n                                <p><strong>Total Guests:</strong> {booking.totalNumOfGuest}</p>\n                                <p><strong>Room Type:</strong> {booking.room.roomType}</p>\n                                <img src={booking.room.roomPhotoUrl} alt=\"Room\" className=\"room-photo\" />\n                            </div>\n                        ))\n                    ) : (\n                        <p>No bookings found.</p>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ProfilePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}