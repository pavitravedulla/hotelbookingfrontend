{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import ApiService from'../../service/ApiService';// Assuming your service is in a file called ApiService.js\nimport AdminLayout from'./AdminLayout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditBookingPage=()=>{const navigate=useNavigate();const{bookingCode}=useParams();const[bookingDetails,setBookingDetails]=useState(null);// State variable for booking details\nconst[error,setError]=useState(null);// Track any errors\nconst[success,setSuccessMessage]=useState(null);// Track any errors\nuseEffect(()=>{const fetchBookingDetails=async()=>{try{const response=await ApiService.getBookingByConfirmationCode(bookingCode);setBookingDetails(response.booking);}catch(error){setError(error.message);}};fetchBookingDetails();},[bookingCode]);const acheiveBooking=async bookingId=>{if(!window.confirm('Are you sure you want to Acheive this booking?')){return;// Do nothing if the user cancels\n}try{const response=await ApiService.cancelBooking(bookingId);if(response.statusCode===200){setSuccessMessage(\"The boking was Successfully Acheived\");setTimeout(()=>{setSuccessMessage('');navigate('/admin/manage-bookings');},3000);}}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);setTimeout(()=>setError(''),5000);}};return/*#__PURE__*/_jsx(AdminLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"find-booking-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Booking Detail\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"success-message\",children:success}),bookingDetails&&/*#__PURE__*/_jsxs(\"div\",{className:\"booking-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Booking Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Confirmation Code: \",bookingDetails.bookingConfirmationCode]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Check-in Date: \",bookingDetails.checkInDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Check-out Date: \",bookingDetails.checkOutDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Num Of Adults: \",bookingDetails.numOfAdults]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Num Of Children: \",bookingDetails.numOfChildren]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Guest Email: \",bookingDetails.guestEmail]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"Booker Detials\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\" Name: \",bookingDetails.user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Email: \",bookingDetails.user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Phone Number: \",bookingDetails.user.phoneNumber]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"Room Details\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\" Room Type: \",bookingDetails.room.roomType]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Room Price: $\",bookingDetails.room.roomPrice]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Room Description: \",bookingDetails.room.roomDescription]}),/*#__PURE__*/_jsx(\"img\",{src:bookingDetails.room.roomPhotoUrl,alt:\"\",sizes:\"\",srcSet:\"\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"acheive-booking\",onClick:()=>acheiveBooking(bookingDetails.id),children:\"Acheive Booking\"})]})]})});};export default EditBookingPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ApiService","AdminLayout","jsx","_jsx","jsxs","_jsxs","EditBookingPage","navigate","bookingCode","bookingDetails","setBookingDetails","error","setError","success","setSuccessMessage","fetchBookingDetails","response","getBookingByConfirmationCode","booking","message","acheiveBooking","bookingId","window","confirm","cancelBooking","statusCode","setTimeout","_error$response","_error$response$data","data","children","className","bookingConfirmationCode","checkInDate","checkOutDate","numOfAdults","numOfChildren","guestEmail","user","name","email","phoneNumber","room","roomType","roomPrice","roomDescription","src","roomPhotoUrl","alt","sizes","srcSet","onClick","id"],"sources":["C:/Users/ADMIN/Desktop/CICD/frontend-hotelbooking1/frontend-hotelbooking/src/component/admin/EditBookingPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ApiService from '../../service/ApiService'; // Assuming your service is in a file called ApiService.js\nimport AdminLayout from './AdminLayout';\n\nconst EditBookingPage = () => {\n    const navigate = useNavigate();\n    const { bookingCode } = useParams();\n    const [bookingDetails, setBookingDetails] = useState(null); // State variable for booking details\n    const [error, setError] = useState(null); // Track any errors\n    const [success, setSuccessMessage] = useState(null); // Track any errors\n\n\n\n    useEffect(() => {\n        const fetchBookingDetails = async () => {\n            try {\n                const response = await ApiService.getBookingByConfirmationCode(bookingCode);\n                setBookingDetails(response.booking);\n            } catch (error) {\n                setError(error.message);\n            }\n        };\n\n        fetchBookingDetails();\n    }, [bookingCode]);\n\n\n    const acheiveBooking = async (bookingId) => {\n        if (!window.confirm('Are you sure you want to Acheive this booking?')) {\n            return; // Do nothing if the user cancels\n        }\n\n        try {\n            const response = await ApiService.cancelBooking(bookingId);\n            if (response.statusCode === 200) {\n                setSuccessMessage(\"The boking was Successfully Acheived\")\n                \n                setTimeout(() => {\n                    setSuccessMessage('');\n                    navigate('/admin/manage-bookings');\n                }, 3000);\n            }\n        } catch (error) {\n            setError(error.response?.data?.message || error.message);\n            setTimeout(() => setError(''), 5000);\n        }\n    };\n\n    return (\n        <AdminLayout>\n            <div className=\"find-booking-page\">\n                <h2>Booking Detail</h2>\n                {error && <p className='error-message'>{error}</p>}\n                {success && <p className='success-message'>{success}</p>}\n                {bookingDetails && (\n                    <div className=\"booking-details\">\n                        <h3>Booking Details</h3>\n                        <p>Confirmation Code: {bookingDetails.bookingConfirmationCode}</p>\n                        <p>Check-in Date: {bookingDetails.checkInDate}</p>\n                        <p>Check-out Date: {bookingDetails.checkOutDate}</p>\n                        <p>Num Of Adults: {bookingDetails.numOfAdults}</p>\n                        <p>Num Of Children: {bookingDetails.numOfChildren}</p>\n                        <p>Guest Email: {bookingDetails.guestEmail}</p>\n\n                        <br />\n                        <hr />\n                        <br />\n                        <h3>Booker Detials</h3>\n                        <div>\n                            <p> Name: {bookingDetails.user.name}</p>\n                            <p> Email: {bookingDetails.user.email}</p>\n                            <p> Phone Number: {bookingDetails.user.phoneNumber}</p>\n                        </div>\n\n                        <br />\n                        <hr />\n                        <br />\n                        <h3>Room Details</h3>\n                        <div>\n                            <p> Room Type: {bookingDetails.room.roomType}</p>\n                            <p> Room Price: ${bookingDetails.room.roomPrice}</p>\n                            <p> Room Description: {bookingDetails.room.roomDescription}</p>\n                            <img src={bookingDetails.room.roomPhotoUrl} alt=\"\" sizes=\"\" srcSet=\"\" />\n                        </div>\n                        <button\n                            className=\"acheive-booking\"\n                            onClick={() => acheiveBooking(bookingDetails.id)}>Acheive Booking\n                        </button>\n                    </div>\n                )}\n            </div>\n        </AdminLayout>\n    );\n};\n\nexport default EditBookingPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}