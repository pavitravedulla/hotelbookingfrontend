{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import ApiService from'../../service/ApiService';import AdminLayout from'./AdminLayout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddRoomPage=()=>{const navigate=useNavigate();const[roomDetails,setRoomDetails]=useState({roomPhotoUrl:'',roomType:'',roomPrice:'',roomDescription:''});const[file,setFile]=useState(null);const[preview,setPreview]=useState(null);const[error,setError]=useState('');const[success,setSuccess]=useState('');const[roomTypes,setRoomTypes]=useState([]);const[newRoomType,setNewRoomType]=useState(false);useEffect(()=>{const fetchRoomTypes=async()=>{try{const types=await ApiService.getRoomTypes();setRoomTypes(types);}catch(error){console.error('Error fetching room types:',error.message);}};fetchRoomTypes();},[]);const handleChange=e=>{const{name,value}=e.target;setRoomDetails(prevState=>({...prevState,[name]:value}));};const handleRoomTypeChange=e=>{if(e.target.value==='new'){setNewRoomType(true);setRoomDetails(prevState=>({...prevState,roomType:''}));}else{setNewRoomType(false);setRoomDetails(prevState=>({...prevState,roomType:e.target.value}));}};const handleFileChange=e=>{const selectedFile=e.target.files[0];if(selectedFile){setFile(selectedFile);setPreview(URL.createObjectURL(selectedFile));}else{setFile(null);setPreview(null);}};const addRoom=async()=>{if(!roomDetails.roomType||!roomDetails.roomPrice||!roomDetails.roomDescription){setError('All room details must be provided.');setTimeout(()=>setError(''),5000);return;}if(!window.confirm('Do you want to add this room?')){return;}try{const formData=new FormData();formData.append('roomType',roomDetails.roomType);formData.append('roomPrice',roomDetails.roomPrice);formData.append('roomDescription',roomDetails.roomDescription);if(file){formData.append('photo',file);}const result=await ApiService.addRoom(formData);if(result.statusCode===200){setSuccess('Room Added successfully.');setTimeout(()=>{setSuccess('');navigate('/admin/manage-rooms');},3000);}}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);setTimeout(()=>setError(''),5000);}};return/*#__PURE__*/_jsx(AdminLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"edit-room-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add New Room\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"success-message\",children:success}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-room-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[preview&&/*#__PURE__*/_jsx(\"img\",{src:preview,alt:\"Room Preview\",className:\"room-photo-preview\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"roomPhoto\",onChange:handleFileChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Room Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:roomDetails.roomType,onChange:handleRoomTypeChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a room type\"}),roomTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type)),/*#__PURE__*/_jsx(\"option\",{value:\"new\",children:\"Other (please specify)\"})]}),newRoomType&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"roomType\",placeholder:\"Enter new room type\",value:roomDetails.roomType,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Room Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"roomPrice\",value:roomDetails.roomPrice,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Room Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"roomDescription\",value:roomDetails.roomDescription,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",onClick:addRoom,children:\"Add Room\"})]})]})});};export default AddRoomPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ApiService","AdminLayout","jsx","_jsx","jsxs","_jsxs","AddRoomPage","navigate","roomDetails","setRoomDetails","roomPhotoUrl","roomType","roomPrice","roomDescription","file","setFile","preview","setPreview","error","setError","success","setSuccess","roomTypes","setRoomTypes","newRoomType","setNewRoomType","fetchRoomTypes","types","getRoomTypes","console","message","handleChange","e","name","value","target","prevState","handleRoomTypeChange","handleFileChange","selectedFile","files","URL","createObjectURL","addRoom","setTimeout","window","confirm","formData","FormData","append","result","statusCode","_error$response","_error$response$data","response","data","children","className","src","alt","type","onChange","map","placeholder","onClick"],"sources":["C:/Users/ADMIN/Desktop/CICD/frontend-hotelbooking1/frontend-hotelbooking/src/component/admin/AddRoomPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport ApiService from '../../service/ApiService';\nimport AdminLayout from './AdminLayout';\n\n\nconst AddRoomPage = () => {\n    const navigate = useNavigate();\n    const [roomDetails, setRoomDetails] = useState({\n        roomPhotoUrl: '',\n        roomType: '',\n        roomPrice: '',\n        roomDescription: '',\n    });\n    const [file, setFile] = useState(null);\n    const [preview, setPreview] = useState(null);\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n    const [roomTypes, setRoomTypes] = useState([]);\n    const [newRoomType, setNewRoomType] = useState(false);\n\n\n    useEffect(() => {\n        const fetchRoomTypes = async () => {\n            try {\n                const types = await ApiService.getRoomTypes();\n                setRoomTypes(types);\n            } catch (error) {\n                console.error('Error fetching room types:', error.message);\n            }\n        };\n        fetchRoomTypes();\n    }, []);\n\n\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setRoomDetails(prevState => ({\n            ...prevState,\n            [name]: value,\n        }));\n    };\n\n\n    const handleRoomTypeChange = (e) => {\n        if (e.target.value === 'new') {\n            setNewRoomType(true);\n            setRoomDetails(prevState => ({ ...prevState, roomType: '' }));\n        } else {\n            setNewRoomType(false);\n            setRoomDetails(prevState => ({ ...prevState, roomType: e.target.value }));\n        }\n    };\n\n\n    const handleFileChange = (e) => {\n        const selectedFile = e.target.files[0];\n        if (selectedFile) {\n            setFile(selectedFile);\n            setPreview(URL.createObjectURL(selectedFile));\n        } else {\n            setFile(null);\n            setPreview(null);\n        }\n    };\n\n\n    const addRoom = async () => {\n        if (!roomDetails.roomType || !roomDetails.roomPrice || !roomDetails.roomDescription) {\n            setError('All room details must be provided.');\n            setTimeout(() => setError(''), 5000);\n            return;\n        }\n\n        if (!window.confirm('Do you want to add this room?')) {\n            return\n        }\n\n        try {\n            const formData = new FormData();\n            formData.append('roomType', roomDetails.roomType);\n            formData.append('roomPrice', roomDetails.roomPrice);\n            formData.append('roomDescription', roomDetails.roomDescription);\n\n            if (file) {\n                formData.append('photo', file);\n            }\n\n            const result = await ApiService.addRoom(formData);\n            if (result.statusCode === 200) {\n                setSuccess('Room Added successfully.');\n                \n                setTimeout(() => {\n                    setSuccess('');\n                    navigate('/admin/manage-rooms');\n                }, 3000);\n            }\n        } catch (error) {\n            setError(error.response?.data?.message || error.message);\n            setTimeout(() => setError(''), 5000);\n        }\n    };\n\n    return (\n        <AdminLayout>\n            <div className=\"edit-room-container\">\n                <h2>Add New Room</h2>\n                {error && <p className=\"error-message\">{error}</p>}\n                {success && <p className=\"success-message\">{success}</p>}\n                <div className=\"edit-room-form\">\n                    <div className=\"form-group\">\n                        {preview && (\n                            <img src={preview} alt=\"Room Preview\" className=\"room-photo-preview\" />\n                        )}\n                        <input\n                            type=\"file\"\n                            name=\"roomPhoto\"\n                            onChange={handleFileChange}\n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label>Room Type</label>\n                        <select value={roomDetails.roomType} onChange={handleRoomTypeChange}>\n                            <option value=\"\">Select a room type</option>\n                            {roomTypes.map(type => (\n                                <option key={type} value={type}>{type}</option>\n                            ))}\n                            <option value=\"new\">Other (please specify)</option>\n                        </select>\n                        {newRoomType && (\n                            <input\n                                type=\"text\"\n                                name=\"roomType\"\n                                placeholder=\"Enter new room type\"\n                                value={roomDetails.roomType}\n                                onChange={handleChange}\n                            />\n                        )}\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Room Price</label>\n                        <input\n                            type=\"text\"\n                            name=\"roomPrice\"\n                            value={roomDetails.roomPrice}\n                            onChange={handleChange}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Room Description</label>\n                        <textarea\n                            name=\"roomDescription\"\n                            value={roomDetails.roomDescription}\n                            onChange={handleChange}\n                        ></textarea>\n                    </div>\n                    <button className=\"update-button\" onClick={addRoom}>Add Room</button>\n                </div>\n            </div>\n        </AdminLayout>\n    );\n};\n\nexport default AddRoomPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}