{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import ApiService from\"../../service/ApiService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){var _location$state,_location$state$from;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const navigate=useNavigate();const location=useLocation();const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/home';const handleSubmit=async e=>{e.preventDefault();if(!email||!password){setError('Please fill in all fields.');setTimeout(()=>setError(''),5000);return;}// Check for admin credentials\nif(email==='2300032416@kluniversity.in'){if(password==='2300032416'){localStorage.setItem('token','admin-token');localStorage.setItem('role','ADMIN');localStorage.setItem('user','2300032416@kluniversity.in');navigate('/admin');return;}else{setError('Invalid admin credentials.');setTimeout(()=>setError(''),5000);return;}}// Normal user login\ntry{const response=await ApiService.loginUser({email,password});if(response.statusCode===200){localStorage.setItem('token',response.token);localStorage.setItem('role',response.role);navigate(from,{replace:true});}}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);setTimeout(()=>setError(''),5000);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"register-link\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Register\"})]})]});}export default LoginPage;","map":{"version":3,"names":["React","useState","useNavigate","useLocation","ApiService","jsx","_jsx","jsxs","_jsxs","LoginPage","_location$state","_location$state$from","email","setEmail","password","setPassword","error","setError","navigate","location","from","state","pathname","handleSubmit","e","preventDefault","setTimeout","localStorage","setItem","response","loginUser","statusCode","token","role","replace","_error$response","_error$response$data","data","message","className","children","onSubmit","type","value","onChange","target","required","href"],"sources":["C:/Users/ADMIN/Desktop/CICD/frontend-hotelbooking1/frontend-hotelbooking/src/component/auth/LoginPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate,useLocation } from \"react-router-dom\";\nimport ApiService from \"../../service/ApiService\";\n\nfunction LoginPage() {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n    const navigate = useNavigate();\n    const location = useLocation();\n\n  const from = location.state?.from?.pathname || '/home';\n\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        if (!email || !password) {\n            setError('Please fill in all fields.');\n            setTimeout(() => setError(''), 5000);\n            return;\n        }\n\n        // Check for admin credentials\n        if (email === '2300032416@kluniversity.in') {\n            if (password === '2300032416') {\n                localStorage.setItem('token', 'admin-token');\n                localStorage.setItem('role', 'ADMIN');\n                localStorage.setItem('user', '2300032416@kluniversity.in');\n                navigate('/admin');\n                return;\n            } else {\n                setError('Invalid admin credentials.');\n                setTimeout(() => setError(''), 5000);\n                return;\n            }\n        }\n\n        // Normal user login\n        try {\n            const response = await ApiService.loginUser({email, password});\n            if (response.statusCode === 200) {\n                localStorage.setItem('token', response.token);\n                localStorage.setItem('role', response.role);\n                navigate(from, { replace: true });\n            }\n        } catch (error) {\n            setError(error.response?.data?.message || error.message);\n            setTimeout(() => setError(''), 5000);\n        }\n    };\n\n    return (\n        <div className=\"auth-container\">\n            <h2>Login</h2>\n            {error && <p className=\"error-message\">{error}</p>}\n            <form onSubmit={handleSubmit}>\n                <div className=\"form-group\">\n                    <label>Email: </label>\n                    <input\n                        type=\"email\"\n                        value={email}\n                        onChange={(e) => setEmail(e.target.value)}\n                        required\n                    />\n                </div>\n                <div className=\"form-group\">\n                    <label>Password: </label>\n                    <input\n                        type=\"password\"\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                        required\n                    />\n                </div>\n                <button type=\"submit\">Login</button>\n            </form>\n\n            <p className=\"register-link\">\n                Don't have an account? <a href=\"/register\">Register</a>\n            </p>\n        </div>\n    );\n}\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}